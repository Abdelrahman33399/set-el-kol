<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>تاسكاتي - ست الكل</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* نفس أنماط صفحة مواعيدي */
        :root {
            --bg-color: #121212;
            --card-bg: rgba(255, 255, 255, 0.05);
            --border-color: rgba(255, 255, 255, 0.1);
            --text-light: #e0e0e0;
            --primary-neon: linear-gradient(45deg, #a453ff, #54aaff);
            --accent-orange: #ff6b35;
            --accent-orange-hover: #e05a2a;
            --shadow-purple: rgba(164, 83, 255, 0.5);
            --shadow-orange: rgba(255, 107, 53, 0.5);
        }
        :root.day-mode {
            --bg-color: #1b405f;
            --card-bg: rgba(175, 171, 171, 0.832);
            --border-color: rgba(27, 27, 228, 0.2);
            --text-light: #f9f9f9;
            --primary-neon: linear-gradient(45deg, #ffffff, #ffffff);
            --accent-orange: #e65c00;
            --accent-orange-hover: #cc5200;
            --shadow-purple: rgb(255, 255, 255);
            --shadow-orange: rgba(230, 92, 0, 0.592);
        }
        body {
            background-color: var(--bg-color);
            color: var(--text-light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            min-height: 100vh;
            padding-bottom: 2rem;
            overflow-x: hidden;
            position: relative;
        }
        .neon-title {
            background: var(--primary-neon);
            -webkit-background-clip: text;
            font-size: 2.5rem;
            font-weight: 800;
            text-shadow: 0 0 10px var(--shadow-purple);
            margin-bottom: 2rem;
        }
        .admin-section {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 1.5rem;
            margin-top: 3rem;
            border: 1px solid var(--border-color);
            backdrop-filter: blur(10px);
        }
        .admin-badge {
            background: var(--accent-orange);
            color: white;
            padding: 5px 10px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }
        .back-to-home-btn {
            position: initial;
            bottom: 20px;
            left: 20px;
            z-index: 1000;
            background: var(--accent-orange);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
            box-shadow: 0 4px 15px var(--shadow-orange);
            transition: all 0.3s ease;
        }
        .back-to-home-btn:hover {
            background: var(--accent-orange-hover);
            box-shadow: 0 8px 20px var(--shadow-orange);
            transform: scale(1.05);
        }
        .theme-toggle-btn {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            background: var(--accent-orange);
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            box-shadow: 0 4px 15px var(--shadow-orange);
            transition: all 0.3s ease;
        }
        .theme-toggle-btn:hover {
            background: var(--accent-orange-hover);
            transform: translateY(-3px) rotate(15deg);
        }
        .table-dark {
            background-color: var(--card-bg) !important;
            border-color: var(--border-color);
        }
        .table-dark th,
        .table-dark td {
            border-color: var(--border-color);
            color: var(--text-light);
        }
        .table-striped tbody tr:nth-of-type(odd) {
            background-color: rgba(255, 255, 255, 0.05);
        }
        .table-hover tbody tr:hover {
            background-color: rgba(255, 107, 53, 0.1);
        }
        .form-control {
            background-color: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--border-color);
            color: var(--text-light);
        }
        .form-control:focus {
            background-color: rgba(255, 255, 255, 0.15);
            border-color: var(--accent-orange);
            color: var(--text-light);
            box-shadow: 0 0 0 0.2rem rgba(255, 107, 53, 0.25);
        }
        .card {
            background-color: var(--card-bg);
            border: 1px solid var(--border-color);
            color: var(--text-light);
            backdrop-filter: blur(10px);
        }
        .alert-info {
            background-color: rgba(23, 162, 184, 0.2);
            border-color: rgba(23, 162, 184, 0.3);
            color: var(--text-light);
        }
        .badge {
            font-weight: 600;
        }

        /* تنسيق كروت التاسكات الأساسية - جديد (بدون تقسيم النص) */
        .global-tasks-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .global-task-card {
            background: rgba(255, 255, 255, 0.04);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 16px;
            position: relative;
            transition: all 0.3s ease;
            cursor: default;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .global-task-card:hover {
            transform: translateY(-3px) scale(1.02);
            box-shadow: 0 8px 20px var(--shadow-orange);
            border-color: var(--accent-orange);
            background: rgba(255, 107, 53, 0.08);
        }
        .global-task-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--accent-orange);
            border-top-left-radius: 16px;
            border-bottom-left-radius: 16px;
        }
        .task-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--accent-orange);
            color: white;
            font-size: 0.75rem;
            padding: 4px 8px;
            border-radius: 8px;
            font-weight: bold;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
        }
        .task-content {
            margin-right: 40px;
            line-height: 1.6;
            font-size: 1.05rem;
            word-wrap: break-word;
            white-space: pre-line; /* يحافظ على الأسطر والمسافات */
        }
        .empty-message {
            text-align: center;
            color: var(--text-light);
            opacity: 0.6;
            padding: 1.5rem;
            font-style: italic;
            border: 1px dashed var(--border-color);
            border-radius: 12px;
        }
    </style>
</head>
<body>
    <!-- زر تبديل الوضع -->
    <button id="themeToggle" class="theme-toggle-btn">
        <i class="fas fa-moon"></i>
    </button>

    <div class="container py-5">
        <h1 class="neon-title text-center mb-4">تاسكاتي</h1>

        <!-- أزرار التحكم -->
        <div class="row justify-content-center mb-4">
            <div class="col-12 col-md-8">
                <div class="d-flex gap-2 flex-wrap">
                    <button class="btn" style="background: var(--accent-orange); color: white;" onclick="showAddForm()">
                        <i class="fas fa-plus me-1"></i> إضافة مهمة
                    </button>
                    <button class="btn btn-outline-light" onclick="clearAllTasks()">
                        <i class="fas fa-trash me-1"></i> مسح الكل
                    </button>
                    <a href="index.html" class="btn btn-outline-warning">
                        <i class="fas fa-arrow-left me-1"></i> العودة للرئيسية
                    </a>
                </div>
            </div>
        </div>

        <!-- نموذج إضافة مهمة (مخفي في البداية) -->
        <div class="row justify-content-center mb-4" id="addFormContainer" style="display:none;">
            <div class="col-12 col-md-8">
                <div class="card bg-dark text-light p-4">
                    <h4><i class="fas fa-tasks me-2"></i> أضف مهمة جديدة</h4>
                    <form id="addTaskForm">
                        <div class="mb-3">
                            <input type="text" class="form-control bg-secondary text-light" id="taskTitle" placeholder="وصف المهمة" required>
                        </div>
                        <button type="submit" class="btn w-100" style="background: var(--accent-orange); color: white;">
                            <i class="fas fa-save me-2"></i> حفظ المهمة
                        </button>
                    </form>
                </div>
            </div>
        </div>

        <!-- جدول المهام الخاصة -->
        <div class="row justify-content-center mb-5">
            <div class="col-12 col-md-8">
                <h3 class="text-light mb-3">📋 مهامي</h3>
                <div class="table-responsive">
                    <table class="table table-dark table-hover">
                        <thead>
                            <tr>
                                <th><i class="fas fa-check-circle"></i></th>
                                <th>الوصف</th>
                                <th>الإجراءات</th>
                            </tr>
                        </thead>
                        <tbody id="tasksTable">
                            <!-- سيتم ملؤه ديناميكيًا -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- قسم المهام العامة من الأدمن -->
        <div class="row justify-content-center">
            <div class="col-12 col-md-8">
                <div class="admin-section">
                    <div class="d-flex align-items-center gap-2 mb-3">
                        <span class="admin-badge">من الأدمن</span>
                        <h4 class="mb-0 text-light">📌 تاسكات اساسية</h4>
                    </div>
                    <div id="globalTasksContainer" class="global-tasks-container">
                        <!-- سيتم ملؤه من Firestore -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="module">
     const _0x23a30d=_0x4c65;(function(_0x4996c3,_0x613c89){const _0xdf08ed=_0x4c65,_0x55c29a=_0x4996c3();while(!![]){try{const _0x43614b=parseInt(_0xdf08ed(0x1cc))/0x1+parseInt(_0xdf08ed(0x1b0))/0x2*(parseInt(_0xdf08ed(0x17b))/0x3)+-parseInt(_0xdf08ed(0x16b))/0x4+-parseInt(_0xdf08ed(0x1e1))/0x5+-parseInt(_0xdf08ed(0x193))/0x6*(-parseInt(_0xdf08ed(0x21a))/0x7)+-parseInt(_0xdf08ed(0x1fc))/0x8+parseInt(_0xdf08ed(0x1f6))/0x9;if(_0x43614b===_0x613c89)break;else _0x55c29a['push'](_0x55c29a['shift']());}catch(_0x3d87ef){_0x55c29a['push'](_0x55c29a['shift']());}}}(_0x5194,0x4154d));const _0x584337=(function(){let _0x530a37=!![];return function(_0x100685,_0x5a6c24){const _0x1662f9=_0x530a37?function(){const _0x29728c=_0x4c65;if(_0x5a6c24){const _0x5c6c45=_0x5a6c24[_0x29728c(0x187)](_0x100685,arguments);return _0x5a6c24=null,_0x5c6c45;}}:function(){};return _0x530a37=![],_0x1662f9;};}()),_0x5a225d=_0x584337(this,function(){const _0x3fa7f6=_0x4c65,_0x495fb8={'lfuDH':_0x3fa7f6(0x204)};return _0x5a225d[_0x3fa7f6(0x1b7)]()[_0x3fa7f6(0x177)](_0x3fa7f6(0x204))[_0x3fa7f6(0x1b7)]()['constructor'](_0x5a225d)['search'](_0x495fb8[_0x3fa7f6(0x178)]);});_0x5a225d();const _0x3a0082=(function(){let _0x368308=!![];return function(_0x7f2276,_0x172bf8){const _0x717a38=_0x368308?function(){const _0x55b7a5=_0x4c65;if(_0x172bf8){const _0x2b030e=_0x172bf8[_0x55b7a5(0x187)](_0x7f2276,arguments);return _0x172bf8=null,_0x2b030e;}}:function(){};return _0x368308=![],_0x717a38;};}());(function(){const _0x419f7b=_0x4c65,_0x52a41b={'ePDvk':'function\x20*\x5c(\x20*\x5c)','YGrNQ':function(_0x3e909e,_0x3e2385){return _0x3e909e(_0x3e2385);},'ZmpZZ':_0x419f7b(0x1c7),'zMeIo':'chain','QxUpc':function(_0x3f8d51,_0x1ab0e5){return _0x3f8d51+_0x1ab0e5;},'caILU':function(_0x106926){return _0x106926();}};_0x3a0082(this,function(){const _0x26039f=_0x419f7b,_0x489d00=new RegExp(_0x52a41b[_0x26039f(0x1e7)]),_0x32f679=new RegExp(_0x26039f(0x19e),'i'),_0x427156=_0x52a41b[_0x26039f(0x207)](_0x52aa37,_0x52a41b[_0x26039f(0x1af)]);!_0x489d00[_0x26039f(0x1de)](_0x427156+_0x52a41b[_0x26039f(0x1a2)])||!_0x32f679['test'](_0x52a41b[_0x26039f(0x174)](_0x427156,'input'))?_0x52a41b[_0x26039f(0x207)](_0x427156,'0'):_0x52a41b[_0x26039f(0x18d)](_0x52aa37);})();}());import{initializeApp}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js';import{getAuth,onAuthStateChanged}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js';function _0x5194(){const _0x4eae27=['error','ref','personal','573924344198','Fmnwg','alert\x20alert-','mVIbR','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22checkbox\x22\x20class=\x22form-check-input\x22\x20','23996KRfWvb','while\x20(true)\x20{}','\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-edit\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20btn-danger\x22\x20onclick=\x22deleteTask(\x27','reset','jRgWB','MowPF','terpv','desc','sEBXN','DOMContentLoaded','constructor','addFormContainer','\x20position-fixed\x20bottom-0\x20end-0\x20m-3','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22btn\x20btn-sm\x20btn-warning\x20me-1\x22\x20onclick=\x22editTask(\x27','مسح\x20كل\x20مهامك؟\x20التاسكات\x20العامة\x20مش\x20هتتاثر.','CeDIL','HClfu','EeSNl','ONtVs','eIdrU','none','onsubmit','tasks','عام','display','OUlVu','1023188hHYcDa','tKmAx','mvaDJ','uNuNQ','block','CIGrb','ksQMA','ZSHre','className','QxUpc','gSNFO','OKOOL','search','lfuDH','LVmLf','add','393adYXZv','vMpHk','تم\x20إكمال\x20المهمة!','dMaqH','kiOLJ','xfMTY','rPgTe','task-content','stateObject','globalTasksContainer','zoKpt','FAkBQ','apply','ohDln','createElement','FhwVD','G-CWVJDKPS0M','title','caILU','UWYad','editTask','theme','خطأ\x20في\x20التعديل:\x20','uid','882hzxjbw','isGlobal','remove','hMEyp','dahJp','addEventListener','SoScZ','Error\x20saving\x20task:','خطأ\x20في\x20المسح:\x20','ddNnX','GgflQ','\x5c+\x5c+\x20*(?:[a-zA-Z_$][0-9a-zA-Z_$]*)','rmWgV','خطأ\x20في\x20تحميل\x20المهام:\x20','sit-el-kol.firebaseapp.com','zMeIo','خطأ\x20في\x20الحفظ:\x20','btCrZ','danger','CMIZr','عدل\x20وصف\x20المهمة:','Error\x20loading\x20tasks:','fSXbl','message','sit-el-kol','rgBHf','تم\x20مسح\x20كل\x20مهامك!','push','ZmpZZ','5442nkyObM','EnrpB','createdAt','forEach','call','mpdlQ','AkHys','toString','documentElement','IGbgr','bnxLx','debu','setItem','sit-el-kol.firebasestorage.app','find','warning','JpqfF','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22empty-message\x22>لا\x20توجد\x20تاسكات\x20عامة\x20بعد.</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','location','getElementById','هل\x20أنت\x20متأكد؟','textContent','SfKiT','init','zLUpF','global-task-card','Error\x20updating:','qGmNS','173228lnYBnt','zktOB','innerHTML','all','RiURq','global','length','getItem','OYmPX','KIKvf','counter','string','AIzaSyDeapYypO595vcDWUoh1gOncsGkQ5EZdyE','KigOM','TgeJr','KmhFE','checked','body','test','تم\x20الحذف!','XHWRr','2083905ynaEQk','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr><td\x20colspan=\x223\x22\x20class=\x22text-center\x20text-muted\x22>لا\x20توجد\x20مهام\x20بعد.</td></tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','day-mode','WLtoI','XHNJT','classList','ePDvk','qdsaB','day','gger','info','<i\x20class=\x22fas\x20fa-sun\x22></i>','SYYtE','data','EwvSi','click','خطأ\x20في\x20التحديث','completed','zbkBu','AsMTD','appendChild','3323979EPHWoM','FlkrC','ODSPG','addTaskForm','yvtin','Ycciq','3702008MZmQyE','RIIjE','uHvRh','filter','type','deleteTask','task-badge','night','(((.+)+)+)+$','taskTitle','RQQhr','YGrNQ','tasksTable','cFKVL','sYAmG','style','sMlAs','تم\x20إعادة\x20فتحها.','wazOW','userId','div','toggleCompleted'];_0x5194=function(){return _0x4eae27;};return _0x5194();}import{getFirestore,collection,query,where,getDocs,addDoc,updateDoc,deleteDoc,doc,orderBy}from'https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js';const firebaseConfig={'apiKey':_0x23a30d(0x1d8),'authDomain':_0x23a30d(0x1a1),'projectId':_0x23a30d(0x1ab),'storageBucket':_0x23a30d(0x1bd),'messagingSenderId':_0x23a30d(0x215),'appId':'1:573924344198:web:fec2e9a54c1c152cd16c07','measurementId':_0x23a30d(0x18b)},app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app);let currentUser=null,allTasks=[];const tasksTable=document['getElementById'](_0x23a30d(0x208)),globalTasksContainer=document[_0x23a30d(0x1c3)](_0x23a30d(0x184)),addFormContainer=document[_0x23a30d(0x1c3)](_0x23a30d(0x225));document['addEventListener'](_0x23a30d(0x223),function(){const _0x516ff2={'QndJV':function(_0x102457){return _0x102457();}};_0x516ff2['QndJV'](setupThemeToggle);}),onAuthStateChanged(auth,async _0x7dcf37=>{const _0xd42f3e=_0x23a30d,_0x89996b={'ONtVs':function(_0xfb29a3){return _0xfb29a3();},'MTQan':'index.html'};_0x7dcf37?(currentUser=_0x7dcf37,await _0x89996b[_0xd42f3e(0x22c)](loadTasks)):window[_0xd42f3e(0x1c2)]['href']=_0x89996b['MTQan'];});async function loadTasks(){const _0x25b227=_0x23a30d,_0x12fea0={'AkHys':_0x25b227(0x214),'Fmnwg':_0x25b227(0x1d1),'MowPF':function(_0x20a77e,_0x315bab,_0xadb0ca){return _0x20a77e(_0x315bab,_0xadb0ca);},'XHNJT':_0x25b227(0x230),'FAkBQ':_0x25b227(0x20f),'xfMTY':_0x25b227(0x1b2),'uvvMP':_0x25b227(0x221),'UWYad':function(_0x31c156,_0x25ec44,_0x377eb1,_0x4ac909){return _0x31c156(_0x25ec44,_0x377eb1,_0x4ac909);},'MgbHM':function(_0x17bd11,_0x41e63a,_0x514ed0,_0x14f1b0){return _0x17bd11(_0x41e63a,_0x514ed0,_0x14f1b0);},'EnrpB':_0x25b227(0x194),'onjQa':function(_0x31333c,_0x1312dd){return _0x31333c(_0x1312dd);},'bnxLx':function(_0x3f936b){return _0x3f936b();},'wazOW':function(_0x2f992b,_0x4dc146){return _0x2f992b+_0x4dc146;},'fSXbl':_0x25b227(0x1a0),'HxaXc':_0x25b227(0x1a5)};try{const _0x1dcc1d=query(_0x12fea0[_0x25b227(0x21f)](collection,db,_0x12fea0[_0x25b227(0x1e5)]),where(_0x12fea0[_0x25b227(0x186)],'==',currentUser['uid']),_0x12fea0['MowPF'](orderBy,_0x12fea0[_0x25b227(0x180)],_0x12fea0['uvvMP'])),_0x262ce6=_0x12fea0[_0x25b227(0x18e)](query,collection(db,_0x12fea0[_0x25b227(0x1e5)]),_0x12fea0['MgbHM'](where,_0x12fea0[_0x25b227(0x1b1)],'==',!![]),orderBy(_0x12fea0[_0x25b227(0x180)],_0x12fea0['uvvMP'])),[_0x8509b0,_0x32b9e0]=await Promise[_0x25b227(0x1cf)]([getDocs(_0x1dcc1d),_0x12fea0['onjQa'](getDocs,_0x262ce6)]);allTasks=[],_0x8509b0[_0x25b227(0x1b3)](_0x26ebca=>{const _0x3f88ef=_0x25b227;allTasks[_0x3f88ef(0x1ae)]({'id':_0x26ebca['id'],..._0x26ebca[_0x3f88ef(0x1ee)](),'type':_0x12fea0[_0x3f88ef(0x1b6)]});}),_0x32b9e0[_0x25b227(0x1b3)](_0x62841d=>{const _0x35927a=_0x25b227;allTasks[_0x35927a(0x1ae)]({'id':_0x62841d['id'],..._0x62841d[_0x35927a(0x1ee)](),'type':_0x12fea0[_0x35927a(0x216)]});}),_0x12fea0[_0x25b227(0x1ba)](renderTasks),_0x12fea0[_0x25b227(0x1ba)](renderGlobalTasks);}catch(_0x1e3f93){console[_0x25b227(0x212)](_0x25b227(0x1a8),_0x1e3f93),_0x12fea0[_0x25b227(0x21f)](showNotification,_0x12fea0[_0x25b227(0x20e)](_0x12fea0[_0x25b227(0x1a9)],_0x1e3f93[_0x25b227(0x1aa)]),_0x12fea0['HxaXc']);}}function renderTasks(){const _0x101d0f=_0x23a30d;tasksTable[_0x101d0f(0x1ce)]='';const _0x1f452c=allTasks['filter'](_0x21421d=>_0x21421d[_0x101d0f(0x200)]===_0x101d0f(0x214));if(_0x1f452c[_0x101d0f(0x1d2)]===0x0){tasksTable[_0x101d0f(0x1ce)]=_0x101d0f(0x1e2);return;}_0x1f452c['forEach'](_0x2cd895=>{const _0x552a46=_0x101d0f;tasksTable[_0x552a46(0x1ce)]+=_0x552a46(0x219)+(_0x2cd895[_0x552a46(0x1f2)]?_0x552a46(0x1dc):'')+'\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20onchange=\x22toggleCompleted(\x27'+_0x2cd895['id']+'\x27,\x20this.checked)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td>'+_0x2cd895[_0x552a46(0x18c)]+'\x20'+(_0x2cd895[_0x552a46(0x1f2)]?'<span\x20class=\x22badge\x20bg-success\x20ms-2\x22>تم\x20✔</span>':'')+_0x552a46(0x227)+_0x2cd895['id']+_0x552a46(0x21c)+_0x2cd895['id']+'\x27)\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<i\x20class=\x22fas\x20fa-trash\x22></i>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';});}function renderGlobalTasks(){const _0x54b75b=_0x23a30d,_0x3b48d2={'yvtin':_0x54b75b(0x210),'vnlix':_0x54b75b(0x1c9),'jRgWB':'span','XHWRr':_0x54b75b(0x202),'dahJp':_0x54b75b(0x231),'uHvRh':_0x54b75b(0x182),'rgBHf':function(_0x2c1268,_0x535022){return _0x2c1268===_0x535022;}};globalTasksContainer[_0x54b75b(0x1ce)]='';const _0x37c443=allTasks[_0x54b75b(0x1ff)](_0x14a294=>_0x14a294[_0x54b75b(0x200)]===_0x54b75b(0x1d1));if(_0x3b48d2[_0x54b75b(0x1ac)](_0x37c443[_0x54b75b(0x1d2)],0x0)){globalTasksContainer[_0x54b75b(0x1ce)]=_0x54b75b(0x1c1);return;}_0x37c443[_0x54b75b(0x1b3)](_0x2f5819=>{const _0x4a4aff=_0x54b75b,_0x10d922=document[_0x4a4aff(0x189)](_0x3b48d2[_0x4a4aff(0x1fa)]);_0x10d922['className']=_0x3b48d2['vnlix'];const _0x3e9004=document[_0x4a4aff(0x189)](_0x3b48d2[_0x4a4aff(0x21e)]);_0x3e9004['className']=_0x3b48d2[_0x4a4aff(0x1e0)],_0x3e9004[_0x4a4aff(0x1c5)]=_0x3b48d2[_0x4a4aff(0x197)];const _0x34edb9=document['createElement'](_0x3b48d2[_0x4a4aff(0x1fa)]);_0x34edb9[_0x4a4aff(0x173)]=_0x3b48d2[_0x4a4aff(0x1fe)],_0x34edb9['textContent']=_0x2f5819[_0x4a4aff(0x18c)],_0x10d922['appendChild'](_0x3e9004),_0x10d922[_0x4a4aff(0x1f5)](_0x34edb9),globalTasksContainer['appendChild'](_0x10d922);});}async function saveTask(_0x2cc106){const _0xccda2d=_0x23a30d,_0x3f4e9e={'vMpHk':function(_0x52cbb2,_0x76dfa9,_0x4d0167){return _0x52cbb2(_0x76dfa9,_0x4d0167);},'GTPCR':function(_0x50ac7f){return _0x50ac7f();},'ksQMA':function(_0x367afb,_0x2d8cb2){return _0x367afb+_0x2d8cb2;},'rPgTe':_0xccda2d(0x1a5)};try{await addDoc(_0x3f4e9e[_0xccda2d(0x17c)](collection,db,'tasks'),{'userId':currentUser[_0xccda2d(0x192)],'title':_0x2cc106,'completed':![],'createdAt':new Date()}),showNotification('تم\x20إضافة\x20المهمة\x20بنجاح!'),await _0x3f4e9e['GTPCR'](loadTasks);}catch(_0x2b7ecd){console['error'](_0xccda2d(0x19a),_0x2b7ecd),showNotification(_0x3f4e9e[_0xccda2d(0x171)](_0xccda2d(0x1a3),_0x2b7ecd[_0xccda2d(0x1aa)]),_0x3f4e9e[_0xccda2d(0x181)]);}}async function toggleCompleted(_0x2e32d2,_0x12ecc8){const _0x388337=_0x23a30d,_0xad5636={'GgflQ':function(_0x2c3026,_0x5cb116,_0x186b69){return _0x2c3026(_0x5cb116,_0x186b69);},'KmhFE':function(_0x3372a1,_0x311416,_0x3fc722,_0x377055){return _0x3372a1(_0x311416,_0x3fc722,_0x377055);},'CMIZr':_0x388337(0x230),'sEBXN':function(_0x28ee45,_0x5bdacb){return _0x28ee45(_0x5bdacb);},'ZSHre':_0x388337(0x17d),'RIIjE':_0x388337(0x20d),'ddNnX':_0x388337(0x1ca),'TgeJr':_0x388337(0x1f1),'terpv':_0x388337(0x1a5)};try{await _0xad5636[_0x388337(0x19d)](updateDoc,_0xad5636[_0x388337(0x1db)](doc,db,_0xad5636[_0x388337(0x1a6)],_0x2e32d2),{'completed':_0x12ecc8}),await loadTasks(),_0xad5636[_0x388337(0x222)](showNotification,_0x12ecc8?_0xad5636[_0x388337(0x172)]:_0xad5636[_0x388337(0x1fd)]);}catch(_0x1236b5){console['error'](_0xad5636[_0x388337(0x19c)],_0x1236b5),_0xad5636[_0x388337(0x19d)](showNotification,_0xad5636[_0x388337(0x1da)],_0xad5636[_0x388337(0x220)]);}}async function editTask(_0x46f5bb){const _0x41218f=_0x23a30d,_0x274faa={'mpdlQ':function(_0x16ed79,_0x3f3da2,_0x1447e4){return _0x16ed79(_0x3f3da2,_0x1447e4);},'FlkrC':_0x41218f(0x1a7),'RQQhr':function(_0xc4f04c,_0x43b7d4){return _0xc4f04c===_0x43b7d4;},'mvaDJ':function(_0x41a5ef,_0xdeec54){return _0x41a5ef(_0xdeec54);},'sMlAs':function(_0x2db914){return _0x2db914();},'KIKvf':function(_0x343386,_0x3e5a0b){return _0x343386+_0x3e5a0b;},'dMaqH':_0x41218f(0x191),'mVIbR':_0x41218f(0x1a5)},_0xcfb0b8=allTasks[_0x41218f(0x1be)](_0x47437f=>_0x47437f['id']===_0x46f5bb&&_0x47437f[_0x41218f(0x200)]===_0x41218f(0x214));if(!_0xcfb0b8)return;const _0x28afa5=_0x274faa[_0x41218f(0x1b5)](prompt,_0x274faa[_0x41218f(0x1f7)],_0xcfb0b8[_0x41218f(0x18c)]);if(_0x274faa[_0x41218f(0x206)](_0x28afa5,null))return;try{await updateDoc(doc(db,_0x41218f(0x230),_0x46f5bb),{'title':_0x28afa5}),_0x274faa[_0x41218f(0x16d)](showNotification,'تم\x20التعديل!'),await _0x274faa[_0x41218f(0x20c)](loadTasks);}catch(_0x4cc9d6){_0x274faa[_0x41218f(0x1b5)](showNotification,_0x274faa[_0x41218f(0x1d5)](_0x274faa[_0x41218f(0x17e)],_0x4cc9d6[_0x41218f(0x1aa)]),_0x274faa[_0x41218f(0x218)]);}}async function deleteTask(_0x2a40ce){const _0x38c3f6=_0x23a30d,_0x32ee5c={'FhwVD':function(_0x442fef,_0x2a88a4){return _0x442fef(_0x2a88a4);},'ohDln':_0x38c3f6(0x230),'uNuNQ':_0x38c3f6(0x1df),'SfKiT':function(_0x28271f){return _0x28271f();},'SYYtE':function(_0x38c1ce,_0x8b1d89,_0x4531d3){return _0x38c1ce(_0x8b1d89,_0x4531d3);},'LVmLf':_0x38c3f6(0x1a5)};if(!_0x32ee5c[_0x38c3f6(0x18a)](confirm,_0x38c3f6(0x1c4)))return;try{await deleteDoc(doc(db,_0x32ee5c[_0x38c3f6(0x188)],_0x2a40ce)),_0x32ee5c[_0x38c3f6(0x18a)](showNotification,_0x32ee5c[_0x38c3f6(0x16e)]),await _0x32ee5c[_0x38c3f6(0x1c6)](loadTasks);}catch(_0x4c953c){_0x32ee5c[_0x38c3f6(0x1ed)](showNotification,'خطأ\x20في\x20الحذف:\x20'+_0x4c953c['message'],_0x32ee5c[_0x38c3f6(0x179)]);}}function _0x4c65(_0x174174,_0x4063f5){const _0xbea052=_0x5194();return _0x4c65=function(_0x52aa37,_0x3a0082){_0x52aa37=_0x52aa37-0x169;let _0x5c33a3=_0xbea052[_0x52aa37];return _0x5c33a3;},_0x4c65(_0x174174,_0x4063f5);}async function clearAllTasks(){const _0x5bb6a9=_0x23a30d,_0x307503={'KigOM':function(_0x215470,_0xf5f6fa){return _0x215470(_0xf5f6fa);},'SoScZ':_0x5bb6a9(0x228),'OYmPX':function(_0x54acfe,_0x18d2a9,_0x5ea8ab){return _0x54acfe(_0x18d2a9,_0x5ea8ab);},'EwvSi':'tasks','tKmAx':function(_0x18396c,_0x3b2e34,_0x4c5d90,_0x5b8d02){return _0x18396c(_0x3b2e34,_0x4c5d90,_0x5b8d02);},'eMvFO':_0x5bb6a9(0x20f),'JLbpo':function(_0x1b1f0d,_0x196de0){return _0x1b1f0d(_0x196de0);},'eIMeM':_0x5bb6a9(0x1ad),'zoKpt':function(_0x5b6cb9,_0x87d930){return _0x5b6cb9+_0x87d930;},'Ycciq':_0x5bb6a9(0x19b)};if(!_0x307503[_0x5bb6a9(0x1d9)](confirm,_0x307503[_0x5bb6a9(0x199)]))return;try{const _0x5427b8=_0x307503[_0x5bb6a9(0x1d4)](query,_0x307503[_0x5bb6a9(0x1d4)](collection,db,_0x307503[_0x5bb6a9(0x1ef)]),_0x307503[_0x5bb6a9(0x16c)](where,_0x307503['eMvFO'],'==',currentUser[_0x5bb6a9(0x192)])),_0x1482dd=await _0x307503['JLbpo'](getDocs,_0x5427b8),_0x3c00b5=[];_0x1482dd['forEach'](_0x1ed2db=>_0x3c00b5['push'](deleteDoc(_0x1ed2db[_0x5bb6a9(0x213)]))),await Promise['all'](_0x3c00b5),_0x307503[_0x5bb6a9(0x1d9)](showNotification,_0x307503['eIMeM']),await loadTasks();}catch(_0x40af5b){showNotification(_0x307503[_0x5bb6a9(0x185)](_0x307503[_0x5bb6a9(0x1fb)],_0x40af5b[_0x5bb6a9(0x1aa)]),_0x5bb6a9(0x1a5));}}function showAddForm(){const _0x5ac3b2=_0x23a30d,_0xcbad1f={'gSNFO':_0x5ac3b2(0x205),'XtEjB':function(_0x33feca,_0x200bf1,_0x4d8091){return _0x33feca(_0x200bf1,_0x4d8091);},'AsMTD':'أدخل\x20وصف\x20المهمة!','TYeMK':_0x5ac3b2(0x1bf),'OUlVu':function(_0x180b02){return _0x180b02();},'qdsaB':_0x5ac3b2(0x16f),'HClfu':_0x5ac3b2(0x1f9)};addFormContainer[_0x5ac3b2(0x20b)][_0x5ac3b2(0x169)]=_0xcbad1f[_0x5ac3b2(0x1e8)],document[_0x5ac3b2(0x1c3)](_0xcbad1f[_0x5ac3b2(0x22a)])[_0x5ac3b2(0x22f)]=async _0x4c648f=>{const _0x3fd771=_0x5ac3b2;_0x4c648f['preventDefault']();const _0x2fc235=document[_0x3fd771(0x1c3)](_0xcbad1f[_0x3fd771(0x175)])['value']['trim']();if(!_0x2fc235){_0xcbad1f['XtEjB'](showNotification,_0xcbad1f[_0x3fd771(0x1f4)],_0xcbad1f['TYeMK']);return;}await saveTask(_0x2fc235),_0xcbad1f[_0x3fd771(0x16a)](resetAddForm);};}function resetAddForm(){const _0x3a1365=_0x23a30d,_0x3ad3ca={'kiOLJ':_0x3a1365(0x22e)};document['getElementById']('addTaskForm')[_0x3a1365(0x21d)](),addFormContainer['style'][_0x3a1365(0x169)]=_0x3ad3ca[_0x3a1365(0x17f)];}function setupThemeToggle(){const _0x1d85e3=_0x23a30d,_0x4af410={'ODSPG':_0x1d85e3(0x1e3),'btCrZ':'theme','qGmNS':'<i\x20class=\x22fas\x20fa-moon\x22></i>','eIdrU':_0x1d85e3(0x1e9),'CIGrb':_0x1d85e3(0x1ec),'RiURq':'themeToggle'},_0x190512=document['getElementById'](_0x4af410[_0x1d85e3(0x1d0)]),_0x5ee066=document[_0x1d85e3(0x1b8)];localStorage[_0x1d85e3(0x1d3)](_0x1d85e3(0x190))===_0x4af410[_0x1d85e3(0x22d)]&&(_0x5ee066[_0x1d85e3(0x1e6)][_0x1d85e3(0x17a)](_0x4af410[_0x1d85e3(0x1f8)]),_0x190512[_0x1d85e3(0x1ce)]=_0x4af410[_0x1d85e3(0x170)]),_0x190512[_0x1d85e3(0x198)](_0x1d85e3(0x1f0),function(){const _0x529d04=_0x1d85e3;_0x5ee066[_0x529d04(0x1e6)]['contains'](_0x4af410['ODSPG'])?(_0x5ee066[_0x529d04(0x1e6)][_0x529d04(0x195)]('day-mode'),localStorage[_0x529d04(0x1bc)](_0x4af410[_0x529d04(0x1a4)],_0x529d04(0x203)),_0x190512['innerHTML']=_0x4af410[_0x529d04(0x1cb)]):(_0x5ee066[_0x529d04(0x1e6)]['add'](_0x4af410['ODSPG']),localStorage[_0x529d04(0x1bc)](_0x4af410['btCrZ'],_0x4af410[_0x529d04(0x22d)]),_0x190512[_0x529d04(0x1ce)]=_0x4af410[_0x529d04(0x170)]);});}function showNotification(_0x1bcd82,_0x196773=_0x23a30d(0x1eb)){const _0x2dc785=_0x23a30d,_0x387ff0={'JpqfF':_0x2dc785(0x210),'OKOOL':function(_0xa71ca0,_0x2573f2,_0x395fa6){return _0xa71ca0(_0x2573f2,_0x395fa6);}},_0x268786=document[_0x2dc785(0x189)](_0x387ff0[_0x2dc785(0x1c0)]);_0x268786['className']=_0x2dc785(0x217)+_0x196773+_0x2dc785(0x226),_0x268786[_0x2dc785(0x20b)]['zIndex']=0x270f,_0x268786[_0x2dc785(0x1ce)]='<i\x20class=\x22fas\x20fa-bell\x20me-2\x22></i>'+_0x1bcd82,document[_0x2dc785(0x1dd)][_0x2dc785(0x1f5)](_0x268786),_0x387ff0[_0x2dc785(0x176)](setTimeout,()=>_0x268786[_0x2dc785(0x195)](),0xfa0);}window['showAddForm']=showAddForm,window['clearAllTasks']=clearAllTasks,window[_0x23a30d(0x211)]=toggleCompleted,window[_0x23a30d(0x18f)]=editTask,window[_0x23a30d(0x201)]=deleteTask;function _0x52aa37(_0x417eb2){const _0xde6691=_0x23a30d,_0x3f59ad={'zbkBu':function(_0x422a77,_0x3a95ad){return _0x422a77===_0x3a95ad;},'WLtoI':_0xde6691(0x21b),'EeSNl':_0xde6691(0x1d6),'rmWgV':function(_0x1f2587,_0x58bc11){return _0x1f2587!==_0x58bc11;},'IGbgr':function(_0x2a3bd3,_0x27d56f){return _0x2a3bd3+_0x27d56f;},'QccrD':function(_0x30a043,_0x52ccf4){return _0x30a043/_0x52ccf4;},'sYAmG':_0xde6691(0x1d2),'CeDIL':function(_0x2694ad,_0x3ae0d7){return _0x2694ad%_0x3ae0d7;},'zLUpF':_0xde6691(0x1bb),'hMEyp':_0xde6691(0x1ea),'cFKVL':'action','dNzZM':_0xde6691(0x183),'zktOB':function(_0x5ac60e,_0x245cbc){return _0x5ac60e(_0x245cbc);}};function _0x45b658(_0x4d5cd5){const _0x52f897=_0xde6691;if(_0x3f59ad[_0x52f897(0x1f3)](typeof _0x4d5cd5,_0x52f897(0x1d7)))return function(_0x3432df){}[_0x52f897(0x224)](_0x3f59ad[_0x52f897(0x1e4)])[_0x52f897(0x187)](_0x3f59ad[_0x52f897(0x22b)]);else _0x3f59ad[_0x52f897(0x19f)](_0x3f59ad[_0x52f897(0x1b9)]('',_0x3f59ad['QccrD'](_0x4d5cd5,_0x4d5cd5))[_0x3f59ad[_0x52f897(0x20a)]],0x1)||_0x3f59ad['zbkBu'](_0x3f59ad[_0x52f897(0x229)](_0x4d5cd5,0x14),0x0)?function(){return!![];}[_0x52f897(0x224)](_0x3f59ad[_0x52f897(0x1b9)](_0x3f59ad[_0x52f897(0x1c8)],_0x3f59ad[_0x52f897(0x196)]))[_0x52f897(0x1b4)](_0x3f59ad[_0x52f897(0x209)]):function(){return![];}[_0x52f897(0x224)](_0x3f59ad[_0x52f897(0x1b9)](_0x3f59ad[_0x52f897(0x1c8)],'gger'))['apply'](_0x3f59ad['dNzZM']);_0x45b658(++_0x4d5cd5);}try{if(_0x417eb2)return _0x45b658;else _0x3f59ad[_0xde6691(0x1cd)](_0x45b658,0x0);}catch(_0x31357c){}}
    </script>
</body>
</html>
