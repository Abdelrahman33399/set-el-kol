<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اختبارات تفاعلية - ست الكل</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .subject-card {
            background: var(--card-bg);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            backdrop-filter: blur(10px);
            margin-bottom: 1.5rem;
        }
        .subject-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(255, 107, 53, 0.3);
            background: rgba(255, 107, 53, 0.1);
        }
        .subject-card i {
            font-size: 3rem;
            color: var(--accent-orange);
            margin-bottom: 1rem;
        }
        .subject-card h3 {
            color: var(--text-light);
            font-weight: 700;
        }
        .subject-card p {
            color: #ccc;
        }
        .subject-card .lock-icon {
            position: absolute;
            top: 15px;
            left: 15px;
            background: rgba(255, 107, 53, 0.2);
            color: var(--accent-orange);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
        }

        .quiz-container {
            display: none;
            background: rgba(30, 30, 50, 0.8);
            padding: 2rem;
            border-radius: 20px;
            margin: 2rem auto;
            max-width: 800px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
        }
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        .question-counter {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--accent-orange);
        }
        .question-text {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            color: white;
            font-weight: 600;
        }
        .options-container {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .option-btn {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #ddd;
            padding: 1rem;
            border-radius: 12px;
            text-align: right;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.1rem;
        }
        .option-btn:hover {
            background: rgba(255, 107, 53, 0.2);
            color: white;
        }
        .option-btn.selected {
            background: var(--accent-orange);
            color: white;
            transform: scale(1.02);
        }
        .option-btn.correct {
            background: #28a745;
            color: white;
        }
        .option-btn.wrong {
            background: #dc3545;
            color: white;
        }
        .quiz-btns {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
        }
        .quiz-btn {
            padding: 12px 30px;
            border-radius: 30px;
            font-weight: 600;
            transition: all 0.3s;
        }
        .next-btn {
            background: var(--accent-orange);
            color: white;
        }
        .next-btn:hover {
            background: #e05a2a;
        }
        .restart-btn {
            background: #6c757d;
            color: white;
        }
        .back-btn {
            background: #28a745;
            color: white;
        }

        .result-container {
            display: none;
            text-align: center;
            padding: 3rem;
            background: rgba(30, 30, 50, 0.8);
            border-radius: 20px;
            margin: 2rem auto;
            max-width: 800px;
            backdrop-filter: blur(10px);
            border: 1px solid var(--border-color);
        }
        .result-score {
            font-size: 3rem;
            font-weight: 800;
            background: var(--primary-neon);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 1rem 0;
        }
        .result-text {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            color: white;
        }
        .explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            text-align: right;
            border-right: 4px solid var(--accent-orange);
        }
        .explanation h5 {
            color: var(--accent-orange);
            margin-bottom: 0.5rem;
        }

        /* Modal كلمة المرور */
        .password-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 9999;
            align-items: center;
            justify-content: center;
        }
        .password-content {
            background: var(--bg-color);
            padding: 2rem;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            text-align: center;
            border: 1px solid var(--border-color);
            box-shadow: 0 10px 40px rgba(0,0,0,0.5);
        }
        .password-input {
            width: 100%;
            padding: 12px;
            border-radius: 12px;
            border: 1px solid var(--border-color);
            background: rgba(255,255,255,0.1);
            color: white;
            font-size: 1.1rem;
            margin: 1rem 0;
            text-align: right;
        }
        .password-error {
            color: #ff6b6b;
            margin: 0.5rem 0;
            display: none;
            
        }
         /* زر العودة للرئيسية - ثابت في الأسفل */
.back-to-home-btn {
    position: initial; /* لتثبيت العنصر في مكانه على الشاشة */
    bottom: 20px;    /* يبعد 20 بكسل من أسفل الصفحة */
    left: 20px;      /* يبعد 20 بكسل من يسار الصفحة */
    z-index: 1000;   /* لضمان ظهوره فوق باقي المحتوى */
    
    /* الخصائص الأخرى للتصميم */
    background: var(--accent-orange);
    color: white;
    border: none;
    padding: 12px 20px;
    border-radius: 30px;
    text-decoration: none;
    font-weight: 600;
    box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
    transition: all 0.3s ease;
}

.back-to-home-btn:hover {
    background: #e05a2a;
    box-shadow: 0 8px 20px rgba(255, 107, 53, 0.5);
    transform: scale(1.05); /* تأثير بسيط للتكبير */
}
    </style>
</head>
<body>
    <div class="container py-5">
        <!-- عنوان الصفحة -->
        <h1 class="neon-title text-center mb-5">اسئلتي</h1>

        <!-- قائمة المواد (بنرات) -->
        <div id="subjectsList" class="row g-4 mb-5">
            <!-- سيتم ملؤه ديناميكيًا -->
        </div>
<a href="index.html" class="back-to-home-btn">
    <i class="fas fa-arrow-left me-2"></i> العودة للرئيسية
</a>
        <!-- Modal كلمة المرور -->
        <div id="passwordModal" class="password-modal">
            <div class="password-content">
                <h3>🔐 أدخل كلمة المرور</h3>
                <p class="text-muted">كل مادة محمية بكلمة مرور خاصة</p>
                <input type="password" id="subjectPassword" class="password-input" placeholder="أدخل كلمة المرور...">
                <div id="passwordError" class="password-error">
                    ❌ كلمة المرور غير صحيحة!
                </div>
                <div class="quiz-btns mt-3">
                    <button class="quiz-btn back-btn" onclick="closePasswordModal()">إلغاء</button>
                    <button class="quiz-btn next-btn" onclick="verifyPassword()">دخول</button>
                </div>
            </div>
        </div>

        <!-- حاوية الاختبار -->
        <div id="quizContainer" class="quiz-container">
            <div class="quiz-header">
                <div class="question-counter" id="questionCounter">السؤال 1 من 5</div>
                <button class="btn btn-outline-light" onclick="exitQuiz()">
                    <i class="fas fa-times"></i> إنهاء
                </button>
            </div>
            <div class="question-text" id="questionText">نص السؤال هنا...</div>
            <div class="options-container" id="optionsContainer">
                <!-- الخيارات هنا -->
            </div>
            <div class="quiz-btns">
                <button class="quiz-btn next-btn" id="nextBtn" onclick="nextQuestion()">التالي</button>
            </div>
        </div>

        <!-- حاوية النتيجة -->
        <div id="resultContainer" class="result-container">
            <h2>🎉 انتهيت من الاختبار!</h2>
            <div class="result-score" id="finalScore">0/5</div>
            <div class="result-text" id="resultText">أحسنت! واصل التميز 🌟</div>
            
            <div id="explanationsContainer">
                <!-- سيتم ملؤه بالشرح -->
            </div>

            <div class="quiz-btns mt-4">
                <button class="quiz-btn restart-btn" onclick="restartQuiz()">
                    <i class="fas fa-redo"></i> إعادة الاختبار
                </button>
                <button class="quiz-btn back-btn" onclick="backToSubjects()">
                    <i class="fas fa-list"></i> العودة للقائمة
                </button>
            </div>
        </div>
    </div>

    <script>
        // قاعدة بيانات المواد والاختبارات + كلمات المرور
        const subjects = [
            {
                id: 1,
                name: "اصبر لما نبدأ",
                description: "",
                icon: "fas fa-square-root-alt",
                password: "math123", // كلمة المرور لهذه المادة
                questions: [
                    {
                        question: "ما هو مشتق الدالة f(x) = x² + 3x - 5؟",
                        options: ["2x + 3", "x + 3", "2x - 5", "x² + 3"],
                        correct: 0,
                        explanation: "المشتق الأول للدالة x² هو 2x، ومشتق 3x هو 3، ومشتق الثابت -5 هو صفر."
                    },
                    {
                        question: "ما قيمة محدد المصفوفة [[2,3],[1,4]]؟",
                        options: ["5", "11", "8", "6"],
                        correct: 0,
                        explanation: "محدد المصفوفة = (2×4) - (3×1) = 8 - 3 = 5."
                    },
                    {
                        question: "ما هو تكامل الدالة f(x) = 2x؟",
                        options: ["x² + C", "2x² + C", "x + C", "2 + C"],
                        correct: 0,
                        explanation: "تكامل 2x = 2 × (x²/2) + C = x² + C."
                    },
                    {
                        question: "ما هو حل المعادلة x² - 4 = 0؟",
                        options: ["x=2 أو x=-2", "x=4", "x=0", "x=1"],
                        correct: 0,
                        explanation: "x² - 4 = 0 → x² = 4 → x = ±2."
                    },
                    {
                        question: "ما هو ناتج ضرب المصفوفتين [[1,2],[3,4]] و [[2,0],[1,2]]؟",
                        options: ["[[4,4],[10,8]]", "[[3,4],[7,8]]", "[[2,4],[6,8]]", "[[1,2],[3,4]]"],
                        correct: 0,
                        explanation: "الضرب: (1×2 + 2×1)=4, (1×0 + 2×2)=4, (3×2 + 4×1)=10, (3×0 + 4×2)=8."
                    }
                ]
            },
            {
                id: 2,
                name: "اصبر لما نبدأ",
                description: "",
                icon: "fas fa-atom",
                password: "physics456", // كلمة المرور لهذه المادة
                questions: [
                    {
                        question: "ما وحدة قياس القوة في النظام الدولي؟",
                        options: ["نيوتن", "جول", "وات", "باسكال"],
                        correct: 0,
                        explanation: "الوحدة هي نيوتن، وتكافئ kg·m/s²."
                    },
                    {
                        question: "ما القانون الذي يصف العلاقة بين الجهد والتيار والمقاومة؟",
                        options: ["قانون أوم", "قانون نيوتن الأول", "قانون بويل", "قانون كولوم"],
                        correct: 0,
                        explanation: "قانون أوم: V = I × R."
                    },
                    {
                        question: "ما مقدار التسارع الناتج عن الجاذبية الأرضية؟",
                        options: ["9.8 m/s²", "10 m/s²", "8.9 m/s²", "7.8 m/s²"],
                        correct: 0,
                        explanation: "القيمة القياسية هي 9.8 متر/ثانية²."
                    },
                    {
                        question: "ما مبدأ حفظ الطاقة؟",
                        options: ["الطاقة لا تفنى ولا تستحدث", "الطاقة تتحول لكتلة", "الطاقة تزداد مع الزمن", "الطاقة تقل مع الاحتكاك"],
                        correct: 0,
                        explanation: "الطاقة تتحول من شكل لآخر لكن مجموعها ثابت في نظام مغلق."
                    },
                    {
                        question: "ما وحدة قياس الطاقة؟",
                        options: ["جول", "نيوتن", "واط", "أمبير"],
                        correct: 0,
                        explanation: "الجول هو وحدة قياس الطاقة والشغل."
                    }
                ]
            },
            {
                id: 3,
                name: "اصبر لما نبدأ",
                description: "",
                icon: "fas fa-flask",
                password: "chem789", // كلمة المرور لهذه المادة
                questions: [
                    {
                        question: "ما pH للماء النقي؟",
                        options: ["7", "0", "14", "1"],
                        correct: 0,
                        explanation: "الماء النقي متعادل وpH = 7."
                    },
                    {
                        question: "ما ناتج تفاعل الحمض مع القاعدة؟",
                        options: ["ملح + ماء", "غاز + ماء", "حمض جديد", "قاعدة جديدة"],
                        correct: 0,
                        explanation: "تفاعل التعادل: حمض + قاعدة → ملح + ماء."
                    },
                    {
                        question: "ما العنصر الأكثر وفرة في القشرة الأرضية؟",
                        options: ["الأكسجين", "السيليكون", "الألومنيوم", "الحديد"],
                        correct: 0,
                        explanation: "الأكسجين يشكل حوالي 46% من القشرة الأرضية."
                    },
                    {
                        question: "ما عدد الإلكترونات في مستوى التكافؤ لذرة الكربون؟",
                        options: ["4", "2", "6", "8"],
                        correct: 0,
                        explanation: "الكربون في المجموعة 14 → 4 إلكترونات تكافؤ."
                    },
                    {
                        question: "ما نوع الرابطة في جزيء الماء؟",
                        options: ["تشاركية قطبية", "أيونية", "تشاركية غير قطبية", "فلزية"],
                        correct: 0,
                        explanation: "الرابطة تشاركية قطبية بسبب فرق السالبية الكهربية بين O و H."
                    }
                ]
            }
        ];

        let currentSubject = null;
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;

        // عرض المواد عند تحميل الصفحة
        document.addEventListener('DOMContentLoaded', function() {
            renderSubjects();
        });

        // عرض بنرات المواد
        function renderSubjects() {
            const container = document.getElementById('subjectsList');
            container.innerHTML = '';

            subjects.forEach(subject => {
                const card = `
                    <div class="col-12 col-md-6 col-lg-4">
                        <div class="subject-card" onclick="openPasswordModal(${subject.id})">
                            <div class="lock-icon">
                                <i class="fas fa-lock"></i>
                            </div>
                            <i class="${subject.icon}"></i>
                            <h3>${subject.name}</h3>
                            <p>${subject.description}</p>
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', card);
            });
        }

        // فتح مودال كلمة المرور
        function openPasswordModal(subjectId) {
            currentSubject = subjects.find(s => s.id === subjectId);
            document.getElementById('subjectPassword').value = '';
            document.getElementById('passwordError').style.display = 'none';
            document.getElementById('passwordModal').style.display = 'flex';
        }

        // إغلاق مودال كلمة المرور
        function closePasswordModal() {
            document.getElementById('passwordModal').style.display = 'none';
        }

        // التحقق من كلمة المرور
        function verifyPassword() {
            const inputPassword = document.getElementById('subjectPassword').value;
            if (inputPassword === currentSubject.password) {
                closePasswordModal();
                startQuiz();
            } else {
                document.getElementById('passwordError').style.display = 'block';
            }
        }

        // بدء الاختبار
        function startQuiz() {
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;

            document.getElementById('subjectsList').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'block';
            document.getElementById('resultContainer').style.display = 'none';

            loadQuestion();
        }

        // تحميل سؤال
        function loadQuestion() {
            const question = currentSubject.questions[currentQuestionIndex];
            document.getElementById('questionCounter').textContent = `السؤال ${currentQuestionIndex + 1} من ${currentSubject.questions.length}`;
            document.getElementById('questionText').textContent = question.question;

            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';

            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn w-100 text-end';
                button.textContent = option;
                button.onclick = () => selectOption(button, index);
                optionsContainer.appendChild(button);
            });

            document.getElementById('nextBtn').disabled = true;
        }

        // اختيار إجابة
        function selectOption(button, answerIndex) {
            // إزالة التحديد من كل الأزرار
            document.querySelectorAll('.option-btn').forEach(btn => {
                btn.classList.remove('selected');
            });

            // تحديد الزر المختار
            button.classList.add('selected');
            userAnswers[currentQuestionIndex] = answerIndex;
            document.getElementById('nextBtn').disabled = false;
        }

        // السؤال التالي
        function nextQuestion() {
            currentQuestionIndex++;

            if (currentQuestionIndex < currentSubject.questions.length) {
                loadQuestion();
            } else {
                calculateScore();
                showResults();
            }
        }

        // حساب النتيجة
        function calculateScore() {
            score = 0;
            for (let i = 0; i < currentSubject.questions.length; i++) {
                if (userAnswers[i] === currentSubject.questions[i].correct) {
                    score++;
                }
            }
        }

        // عرض النتائج
        function showResults() {
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('resultContainer').style.display = 'block';

            const total = currentSubject.questions.length;
            document.getElementById('finalScore').textContent = `${score}/${total}`;

            let resultText = "";
            const percentage = (score / total) * 100;
            if (percentage >= 80) {
                resultText = "ممتاز! 🌟 أنت متميز!";
            } else if (percentage >= 60) {
                resultText = "جيد جدًا! 👍 واصل التقدم!";
            } else if (percentage >= 40) {
                resultText = "لابأس! 📚 تحتاج مراجعة بسيطة.";
            } else {
                resultText = "حاول مرة أخرى! 💪 المذاكرة هتساعدك!";
            }
            document.getElementById('resultText').textContent = resultText;

            // عرض التفسيرات
            const explanationsContainer = document.getElementById('explanationsContainer');
            explanationsContainer.innerHTML = '<h3 class="text-light mb-4">شرح الإجابات:</h3>';

            currentSubject.questions.forEach((q, i) => {
                const isCorrect = userAnswers[i] === q.correct;
                const userAnswer = q.options[userAnswers[i]] || "لم تجب";
                const correctAnswer = q.options[q.correct];

                const explanationDiv = document.createElement('div');
                explanationDiv.className = 'explanation';
                explanationDiv.innerHTML = `
                    <h5>السؤال ${i + 1}: ${isCorrect ? '<span class="text-success">✓ إجابتك صحيحة!</span>' : '<span class="text-danger">✗ إجابتك: ${userAnswer}</span>'}</h5>
                    <p><strong>الإجابة الصحيحة:</strong> ${correctAnswer}</p>
                    <p><strong>الشرح:</strong> ${q.explanation}</p>
                `;
                explanationsContainer.appendChild(explanationDiv);
            });
        }

        // إعادة الاختبار
        function restartQuiz() {
            currentQuestionIndex = 0;
            userAnswers = [];
            score = 0;
            document.getElementById('resultContainer').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'block';
            loadQuestion();
        }

        // العودة للقائمة
        function backToSubjects() {
            document.getElementById('resultContainer').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('subjectsList').style.display = 'grid';
        }

        // إنهاء الاختبار
        function exitQuiz() {
            if (confirm('هل أنت متأكد أنك تريد إنهاء الاختبار؟')) {
                document.getElementById('quizContainer').style.display = 'none';
                document.getElementById('subjectsList').style.display = 'grid';
            }
        }

        // إشعار مؤقت
        function showNotification(msg) {
            const div = document.createElement('div');
            div.className = 'alert alert-info position-fixed bottom-0 end-0 m-3';
            div.style.zIndex = 9999;
            div.innerHTML = `<i class="fas fa-bell me-2"></i>${msg}`;
            document.body.appendChild(div);
            setTimeout(() => div.remove(), 4000);
        }
    </script>
</body>
</html>