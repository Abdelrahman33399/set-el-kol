<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <link rel="icon" href="../../Image_fx6.jpg" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الاختبار - التدريس المصغر</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --bg-color: #121212;
            --card-bg: rgba(255, 255, 255, 0.05);
            --border-color: rgba(255, 255, 255, 0.1);
            --text-light: #e0e0e0;
            --primary-neon: linear-gradient(45deg, #a453ff, #54aaff);
            --accent-orange: #ff6b35;
        }
        .day-mode {
            --bg-color: #1b405f;
            --card-bg: rgba(255, 255, 255, 0.7);
            --text-light: #ec6211;
        }
        body {
            background-color: var(--bg-color);
            color: var(--text-light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: background-color 0.3s;
        }
        .quiz-container, .final-form, .result-container {
            display: none;
            background: var(--card-bg);
            padding: 2rem;
            border-radius: 20px;
            margin: 2rem auto;
            max-width: 800px;
            border: 1px solid var(--border-color);
        }
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        .question-counter {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--accent-orange);
        }
        .question-text {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            color: var(--text-light);
            font-weight: 600;
        }
        .options-container {
            display: grid;
            gap: 1rem;
            margin-bottom: 2rem;
        }
        .option-btn {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: #ddd;
            padding: 1rem;
            border-radius: 12px;
            text-align: right;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.1rem;
        }
        .option-btn:hover {
            background: rgba(255, 107, 53, 0.2);
            color: var(--text-light);
        }
        .option-btn.selected {
            background: var(--accent-orange);
            color: white;
            transform: scale(1.02);
        }
        .option-btn.correct {
            background: #28a745;
            color: white;
        }
        .option-btn.wrong {
            background: #dc3545;
            color: white;
        }
        .essay-input {
            width: 100%;
            min-height: 120px;
            padding: 1rem;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid var(--border-color);
            color: var(--text-light);
            font-size: 1.1rem;
            resize: vertical;
            margin-bottom: 1.5rem;
        }
        .quiz-btns {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        .quiz-btn {
            padding: 12px 30px;
            border-radius: 30px;
            font-weight: 600;
            transition: all 0.3s;
            white-space: nowrap;
        }
        .next-btn, .submit-btn {
            background: var(--accent-orange);
            color: white;
        }
        .next-btn:hover, .submit-btn:hover {
            background: #e05a2a;
        }
        .restart-btn {
            background: #6c757d;
            color: white;
        }
        .back-btn {
            background: #28a745;
            color: white;
        }
        .result-score {
            font-size: 3rem;
            font-weight: 800;
            background: var(--primary-neon);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 1rem 0;
        }
        .result-text {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            color: var(--text-light);
        }
        .explanation {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            border-radius: 12px;
            margin: 1.5rem 0;
            text-align: right;
            border-right: 4px solid var(--accent-orange);
        }
        .explanation h5 {
            color: var(--accent-orange);
            margin-bottom: 0.5rem;
        }
        .final-form input {
            width: 100%;
            padding: 12px;
            margin: 0.5rem 0;
            border-radius: 12px;
            background: rgba(255,255,255,0.1);
            border: 1px solid var(--border-color);
            color: var(--text-light);
            font-size: 1.1rem;
        }
        .theme-toggle-btn {
            position: fixed;
            top: 20px;
            left: 20px;
            background: var(--accent-orange);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            z-index: 1000;
        }
        .back-to-home-btn {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: var(--accent-orange);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <button id="themeToggle" class="theme-toggle-btn">
        <i class="fas fa-moon"></i>
    </button>

    <div class="container py-5">
        <div id="quizContainer" class="quiz-container">
            <div class="quiz-header">
                <div class="question-counter" id="questionCounter">السؤال 1 من 2</div>
                <button class="btn btn-outline-light" onclick="exitQuiz()">
                    <i class="fas fa-times"></i> إنهاء
                </button>
            </div>
            <div class="question-text" id="questionText">نص السؤال هنا...</div>
            <div class="options-container" id="optionsContainer"></div>
            <div class="quiz-btns">
                <button class="quiz-btn next-btn d-none" id="nextBtn" onclick="nextQuestion()">التالي</button>
                <button class="quiz-btn submit-btn d-none" id="submitEssayBtn" onclick="submitEssay()">تسليم</button>
            </div>
        </div>

        <div id="finalFormContainer" class="final-form">
            <h3 class="text-center mb-4">أدخل بياناتك</h3>
            <input type="text" id="studentName" placeholder="الاسم الكامل" required>
            <input type="text" id="studentId" placeholder=" (ID)" required>
            <div class="quiz-btns mt-3">
                <button class="quiz-btn next-btn" onclick="saveStudentData()">حفظ</button>
            </div>
        </div>

        <div id="resultContainer" class="result-container">
            <h2>🎉 انتهيت من الاختبار!</h2>
            <div class="result-score" id="finalScore">0/2</div>
            <div class="result-text" id="resultText">أحسنت! واصل التميز 🌟</div>
            <div id="explanationsContainer"></div>
            <div class="mt-4">
                <h4>شارك نتيجتك أو احفظها</h4>
                <div class="input-group mb-3">
                    <span class="input-group-text">+<input type="text" id="countryCode" placeholder="رمز الدولة" style="max-width:80px; text-align:center;" value="20"></span>
                    <input type="text" id="phoneNumber" class="form-control" placeholder="رقم الهاتف (بدون صفر)">
                </div>
                <div class="quiz-btns">
                    <button class="quiz-btn back-btn" onclick="shareToWhatsApp()">
                        <i class="fab fa-whatsapp"></i> إرسال عبر واتساب
                    </button>
                    <button class="quiz-btn next-btn" onclick="downloadPDF()">
                        <i class="fas fa-file-pdf"></i> تحميل كـ PDF
                    </button>
                    <button class="quiz-btn restart-btn" onclick="restartQuiz()">
                        <i class="fas fa-redo"></i> إعادة الاختبار
                    </button>
                    <button class="quiz-btn back-btn" onclick="backToMaterials()">
                        <i class="fas fa-list"></i> العودة للمواد
                    </button>
                </div>
            </div>
        </div>

        <a href="materials.html" class="back-to-home-btn">
            <i class="fas fa-arrow-left me-2"></i> العودة للمواد
        </a>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDeapYypO595vcDWUoh1gOncsGkQ5EZdyE",
            authDomain: "sit-el-kol.firebaseapp.com",
            projectId: "sit-el-kol",
            storageBucket: "sit-el-kol.firebasestorage.app",
            messagingSenderId: "573924344198",
            appId: "1:573924344198:web:fec2e9a54c1c152cd16c07"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.saveToFirebase = async function(data) {
            try {
                await addDoc(collection(db, "quiz_submissions"), data);
            } catch (e) {
                console.error("فشل حفظ البيانات:", e);
            }
        };
    </script>

    <script>
       const questions = [
    {
        type: "mcq",
        question: "ما الفرق الجوهري بين \"التعليم\" و\"التعلم\"؟",
        options: [
            "لا فرق؛ المصطلحان مترادفان",
            "التعليم عملية يقوم بها المعلم، والتعلم تغير في سلوك المتعلم",
            "التعليم يحدث في المدرسة فقط، والتعلم يحدث في الحياة",
            "التعلم يسبق التعليم دائمًا"
        ],
        correct: 1,
        explanation: "التعليم هو العملية المنظمة التي يُنفذها المعلم لنقل المعرفة، بينما التعلم هو التغير الإيجابي في سلوك المتعلم نتيجة الخبرة. قد يحدث تعليم دون تعلم (إذا لم يستوعب الطالب)، لكن لا يحدث تعلم دون تفاعل مع مدخل تعليمي أو خبرة."
    },
    {
        type: "mcq",
        question: "أي من العبارات التالية تُعبّر بدقة عن طبيعة \"التدريس\" كعملية؟",
        options: [
            "نقل معلومات من كتاب إلى دفتر الطالب",
            "موقف تفاعلي منظم بين المعلم والمتعلم والمحتوى لتحقيق أهداف محددة",
            "شرح المحاضر لمحتوى الدرس دون تفاعل",
            "تقييم الطلاب في نهاية الفصل الدراسي"
        ],
        correct: 1,
        explanation: "التدريس ليس مجرد شرح، بل عملية تواصلية ديناميكية تشمل ثلاثة عناصر أساسية: المعلم، المتعلم، والمحتوى، وتهدف إلى إحداث تغيير مرغوب فيه في السلوك المعرفي، المهاري، أو الوجداني."
    },
    {
        type: "mcq",
        question: "ما الهدف الأساسي من \"التدريس المصغر\" (Micro Teaching)؟",
        options: [
            "اختصار وقت الدرس لتقليل الجهد",
            "تدريب الطالب المعلم على مهارة تدريسية محددة في موقف مصغّر مع تغذية راجعة فورية",
            "تقليل عدد الطلاب في الفصل",
            "استبدال التدريس التقليدي بالتعليم الإلكتروني"
        ],
        correct: 1,
        explanation: "التدريس المصغر هو أداة تدريبية تربوية تُستخدم في إعداد المعلمين، حيث يُدرّس الطالب لمجموعة صغيرة (5–10 طلاب) لمدة قصيرة (5–15 دقيقة) مع التركيز على مهارة واحدة (مثل طرح الأسئلة)، ثم يحصل على تغذية راجعة لتحسين أدائه."
    },
    {
        type: "mcq",
        question: "ما العلاقة بين \"الاستراتيجية\" و\"طريقة التدريس\"؟",
        options: [
            "لا علاقة بينهما",
            "الاستراتيجية خطة عامة، وطريقة التدريس خطوات تنفيذية ضمن تلك الخطة",
            "طريقة التدريس أوسع من الاستراتيجية",
            "الاستراتيجية تُطبّق بعد انتهاء الدرس"
        ],
        correct: 1,
        explanation: "الاستراتيجية هي الإطار العام لتنظيم التدريس (مثل التعلم النشط)، بينما طريقة التدريس هي الخطوات المحددة لتنفيذها (مثل العصف الذهني أو حل المشكلات). الاستراتيجية تشمل أكثر من طريقة."
    },
    {
        type: "mcq",
        question: "أي من العناصر التالية يُعدّ جزءًا من \"البيئة التعليمية\"؟",
        options: [
            "المحتوى الدراسي فقط",
            "الوسائل التعليمية فقط",
            "الإطار المادي والنفسي الذي يتم فيه التعلم",
            "نتائج الامتحانات النهائية"
        ],
        correct: 2,
        explanation: "البيئة التعليمية تشمل العوامل المادية (الإضاءة، التهوية، الترتيب) والنفسية (الاحترام، الأمان، التشجيع)، وكلاهما يؤثر في فعالية التعلم، خاصة في تصميم بيئات التعلم الرقمية."
    },
    {
        type: "mcq",
        question: "ما الفرق بين \"التقويم البنائي\" و\"التقويم النهائي\"؟",
        options: [
            "البنائي يُجرى في نهاية الفصل، والنهائي في منتصفه",
            "البنائي مستمر لتحسين التعلم، والنهائي لقياس التحصيل النهائي",
            "البنائي يُستخدم للرسوب، والنهائي للنجاح",
            "لا فرق جوهري بينهما"
        ],
        correct: 1,
        explanation: "التقويم البنائي يرافق العملية التعليمية (مثل الاختبارات القصيرة، المشاركات) لتشخيص الصعوبات وتعديل التدريس، بينما التقويم النهائي يقيس مستوى الإنجاز بعد انتهاء الوحدة أو المقرر."
    },
    {
        type: "mcq",
        question: "ما المقصود بـ \"الكفايات التعليمية\"؟",
        options: [
            "عدد الساعات التي يقضيها المعلم في التدريس",
            "القدرة على استخدام الحاسوب فقط",
            "المعارف والمهارات والاتجاهات التي تُمكّن الفرد من أداء مهام مهنية محددة بكفاءة",
            "درجات الطلاب في الامتحانات"
        ],
        correct: 2,
        explanation: "الكفايات تتجاوز المعرفة النظرية لتشمل التطبيق الفعّال في سياقات واقعية، وهي محور أنظمة التعليم الحديثة (مثل كفايات معلم تكنولوجيا التعليم في تصميم بيئات تعلم تفاعلية)."
    },
    {
        type: "mcq",
        question: "أي من العبارات التالية تُصنّف ضمن \"مهارات ما بعد التدريس\"؟",
        options: [
            "التهيئة للدرس",
            "عرض المحتوى",
            "تحليل نتائج التقويم وتعديل الخطة",
            "طرح الأسئلة التحفيزية"
        ],
        correct: 2,
        explanation: "مهارات ما بعد التدريس تشمل التقييم، التغذية الراجعة، وتعديل التصميم التعليمي بناءً على نتائج التعلم، وهو ما يُظهر التفكير التأملي لدى المعلم المهني."
    },
    {
        type: "mcq",
        question: "ما دور \"الوسائل التعليمية\" في العملية التعليمية؟",
        options: [
            "تزيين الفصل الدراسي",
            "تقليل جهد المعلم",
            "تجسيد المفاهيم وتوضيحها وتسهيل الفهم",
            "استبدال المعلم تمامًا"
        ],
        correct: 2,
        explanation: "الوسائل التعليمية (كالرسوم، النماذج، المحاكاة الرقمية) تُستخدم لـ تحويل المفاهيم المجردة إلى محسوسة، خاصة في مراحل النمو التي تعتمد على التفكير المحسوس (كما عند بياجي)."
    },
    {
        type: "mcq",
        question: "ما العلاقة بين \"النهج\" و\"المحتوى الدراسي\"؟",
        options: [
            "النهج جزء من المحتوى",
            "المحتوى هو العنصر الوحيد في النهج",
            "النهج إطار شامل يضم الأهداف، المحتوى، الأنشطة، والتقويم",
            "لا علاقة بينهما"
        ],
        correct: 2,
        explanation: "النهج (Curriculum Approach) هو الهيكل التنظيمي الشامل الذي يربط بين جميع عناصر المنظومة التعليمية، وليس مجرد سرد للمحتوى."
    },
    {
        type: "mcq",
        question: "ما المقصود بـ \"طرق التعلم\"؟",
        options: [
            "الأساليب التي يستخدمها المعلم لتنظيم الدرس",
            "الإجراءات التي يتبعها المتعلم لتنظيم تعلمه الذاتي (كالخرائط الذهنية)",
            "خطط التدريس الأسبوعية",
            "أنواع الامتحانات"
        ],
        correct: 1,
        explanation: "طرق التعلم تركز على دور المتعلم النشط في إدارة تعلمه (مثل التلخيص، التنظيم، التكرار)، وهي أساس التعلم الذاتي والتعلم مدى الحياة."
    },
    {
        type: "mcq",
        question: "أي من المهارات التالية تُصنّف ضمن \"مهارات التنفيذ\" أثناء التدريس؟",
        options: [
            "كتابة الأهداف السلوكية",
            "إدارة الفصل وطرح الأسئلة",
            "تصميم اختبار نهائي",
            "تحليل نتائج الامتحان"
        ],
        correct: 1,
        explanation: "مهارات التنفيذ تتم خلال التفاعل الفعلي في الفصل، وتشمل إدارة الوقت، التفاعل مع الطلاب، استخدام الوسائل، وطرح الأسئلة الفعّالة."
    },
    {
        type: "mcq",
        question: "ما أهمية \"التغذية الراجعة\" في العملية التعليمية؟",
        options: [
            "إصدار أحكام نهائية على أداء الطالب",
            "توفير معلومات للمتعلم عن أدائه لتحسينه",
            "تقليل عدد الواجبات",
            "مقارنة الطلاب ببعضهم"
        ],
        correct: 1,
        explanation: "التغذية الراجعة الفعّالة تكون وصفية، فورية، ومرتبطة بالأهداف، وتساعد المتعلم على تصحيح مساره، وهي ركن أساسي في التعلم البنائي."
    },
    {
        type: "mcq",
        question: "ما الفرق بين \"الوسائل التعليمية\" و\"الموارد التعليمية\"؟",
        options: [
            "لا فرق",
            "الوسائل تُستخدم لتوضيح المفاهيم، والموارد تشمل جميع المصادر (كتب، إنترنت، مكتبة)",
            "الموارد تُستخدم في المدرسة فقط",
            "الوسائل جزء من الموارد، لكن العكس غير صحيح"
        ],
        correct: 1,
        explanation: "الوسائل التعليمية (كالفيديو، النماذج) تُستخدم أثناء الشرح، بينما الموارد التعليمية أوسع وتشمل كل ما يُستعان به في التعلم (رقميًا أو ورقيًا)."
    },
    {
        type: "mcq",
        question: "لماذا يُعدّ فهم \"العلاقة بين التعليم والتعلم والتدريس\" ضروريًا لمعلم تكنولوجيا التعليم؟",
        options: [
            "لاستخدام أحدث البرامج فقط",
            "لتصميم بيئات تعلم تفاعلية تضمن حدوث التعلم الفعلي، وليس مجرد تقديم محتوى",
            "لتقليل عدد المحاضرات",
            "لاعتماد التدريس الإلكتروني فقط"
        ],
        correct: 1,
        explanation: "معلم تكنولوجيا التعليم قد يُقدّم محتوى رقميًا (تعليم) دون أن يحدث تعلم. الفهم الدقيق للمفاهيم يساعده على تصميم تجارب تفاعلية تضمن التفاعل (تدريس فعّال) وتؤدي إلى تغيير سلوكي (تعلم)."
    },
    {
        type: "essay",
        question: "اشرح كيف يُسهم الخلط بين مفاهيمي \"التعليم\" و\"التعلم\" في فشل بعض تطبيقات التكنولوجيا التعليمية.",
        modelAnswer: "الخلط بين المفهومين يؤدي إلى تصميم أنظمة تركز على تقديم المحتوى (كالمحاضرات المسجلة أو الشرائح) دون ضمان حدوث التعلم. فمثلاً، منصة تعليمية قد تُقدّم فيديوهات ممتازة (تعليم)، لكن إذا لم تتضمن أنشطة تفاعلية، تغذية راجعة، أو فرص تطبيق (تدريس فعّال)، فلن يحدث تعلم حقيقي. الفهم الدقيق يدفع المصمّم إلى جعل التكنولوجيا وسيلة لخلق مواقف تعلّم نشطة، لا مجرد قناة نقل معلومات."
    },
    {
        type: "essay",
        question: "لماذا يُعدّ \"التدريس المصغر\" أداة تدريبية فعّالة في إعداد معلمي تكنولوجيا التعليم؟",
        modelAnswer: "التدريس المصغر يسمح للطالب المعلم بـ التركيز على مهارة رقمية محددة (مثل استخدام المحاكاة، أو إدارة نقاش إلكتروني) في بيئة آمنة، مع ملاحظة دقيقة وتغذية راجعة فورية. هذا يُقلل القلق، ويعزز الثقة، ويُمكّنه من تحسين أدائه قبل مواجهة فصول حقيقية. كما أنه يُنمّي التفكير التأملي، وهو مهارة جوهرية لمعلم العصر الرقمي."
    },
    {
        type: "essay",
        question: "قارن بين \"الاستراتيجية\" و\"طريقة التدريس\" مع توضيح دور كل منهما في تصميم درس تفاعلي باستخدام التكنولوجيا.",
        modelAnswer: "الاستراتيجية (مثل التعلم القائم على المشاريع) تُحدّد الرؤية العامة للدرس: كيف سيتعلم الطلاب؟ أما طريقة التدريس (مثل العصف الذهني عبر منصة رقمية) فهي الآلية التنفيذية. في تصميم درس تفاعلي، تختار الاستراتيجية أولاً (مثلاً: التعلم التعاوني)، ثم تُحدّد الطرق (نقاش عبر Zoom، عمل جماعي على Google Docs)، ثم تُوظّف الوسائل (فيديوهات، استبيانات تفاعلية). الخلط بينهما يؤدي إلى تطبيقات تكنولوجية مشتتة لا تخدم هدفًا تعليميًا واضحًا."
    },
    {
        type: "essay",
        question: "كيف يُمكن ربط \"التقويم البنائي\" بممارسات تكنولوجيا التعليم الحديثة؟",
        modelAnswer: "التقويم البنائي يتكامل مع التكنولوجيا عبر أدوات مثل الاختبارات التفاعلية الفورية (Kahoot, Quizizz)، السجلات الرقمية للإنجاز (Portfolios)، والتعليقات الصوتية أو المرئية على الأعمال. هذه الأدوات تسمح بتغذية راجعة مستمرة، وتشخيص دقيق للصعوبات، وتعديل المسار التعليمي في الوقت الحقيقي، مما يحوّل التقويم من أداة قياس إلى أداة تعلّم."
    },
    {
        type: "essay",
        question: "ما العلاقة بين \"الكفايات التعليمية\" و\"متطلبات سوق العمل\" في تخصص تكنولوجيا التعليم؟",
        modelAnswer: "كفايات معلم تكنولوجيا التعليم لا تقتصر على معرفة البرامج، بل تشمل القدرة على تحليل الاحتياجات التعليمية، تصميم حلول تفاعلية، تقييم فعاليتها، والعمل بروح الفريق. هذه الكفايات تتوافق مع متطلبات سوق العمل الحديث (مثل تصميم تجارب تعليمية رقمية في الشركات أو المنصات التعليمية)، مما يجعل الخريج قادرًا على الانتقال من دور \"المستخدم\" إلى \"المصمّم المبتكر\"."
    },
    {
        type: "essay",
        question: "لماذا يُعدّ فهم \"البيئة التعليمية\" (المادية والنفسية) ضروريًا عند تصميم بيئات تعلم رقمية؟",
        modelAnswer: "البيئة الرقمية ليست مجرد منصة، بل فضاء تفاعلي نفسي ومعرفي. فالمظهر البصري، سهولة الاستخدام، وجود قنوات تواصل، وتشجيع التعاون كلها عوامل نفسية تؤثر في الدافعية. أما العوامل المادية فتشمل سرعة الإنترنت، توافق الأجهزة، وإمكانية الوصول. إهمال هذه الجوانب يؤدي إلى بيئات رقمية \"باردة\" تُفقِد المتعلم شعور الانتماء، حتى لو كان المحتوى غنيًا."
    },
    {
        type: "essay",
        question: "كيف تُسهم \"طرق التعلم\" في تعزيز الاستقلالية المعرفية لدى طلاب العصر الرقمي؟",
        modelAnswer: "طرق التعلم (كاستخدام الخرائط الذهنية الرقمية، أو تقنيات التلخيص الذاتي) تُدرّب الطالب على تنظيم معرفته بنفسه، بدلًا من الاعتماد على المعلم. في عصر المعلومات، هذه المهارات ضرورية لتمييز الموثوق من المزيف، وبناء معرفة شخصية من مصادر متنوعة. معلم تكنولوجيا التعليم لا يُعلّم محتوى فقط، بل يُعلّم كيف يتعلّم."
    },
    {
        type: "essay",
        question: "ما الفرق بين \"أساليب التدريس\" و\"مهارات التدريس\"؟ ولماذا يهم هذا التمييز معلم المستقبل؟",
        modelAnswer: "أساليب التدريس هي الإجراءات الجزئية (مثل طرح سؤال مفتوح)، بينما مهارات التدريس هي السلوكيات القابلة للملاحظة والقياس التي تُحقّق فعالية (مثل مهارة طرح الأسئلة بذكاء). التمييز مهم لأن المعلم قد يستخدم \"أسلوب\" دون أن يمتلك \"المهارة\" اللازمة لتنفيذه بفعالية. التدريب يجب أن يركّز على بناء المهارات، لا مجرد تطبيق أساليب شكلية."
    },
    {
        type: "essay",
        question: "كيف يُمكن دمج \"التغذية الراجعة\" في أنظمة التعلم الذكي (Adaptive Learning Systems)؟",
        modelAnswer: "أنظمة التعلم الذكي تستخدم الذكاء الاصطناعي لتحليل أداء الطالب لحظيًا، ثم تُقدّم تغذية راجعة مخصصة: توجيهات عند الخطأ، تحديات عند الإتقان، أو موارد داعمة عند الحاجة. هذه التغذية ليست عقابية، بل بنائية، وتُقلّد دور المعلم الماهر، مما يجعل التعلم الرقمي أكثر فعالية وإنسانية."
    },
    {
        type: "essay",
        question: "لماذا يُعدّ \"النهج\" أكثر شمولًا من \"المحتوى الدراسي\"؟",
        modelAnswer: "المحتوى الدراسي هو ماذا نُدرّس؟، أما النهج فهو كيف ولماذا وما الهدف؟. النهج يربط المحتوى بالأهداف السلوكية، وينظم الأنشطة التي تُحقّقه، ويحدّد أدوات التقويم المناسبة. بدون نهج، يصبح المحتوى مجرد معلومات متناثرة لا تُحدث تغييرًا في سلوك المتعلم، خاصة في التخصصات التطبيقية كتكنولوجيا التعليم."
    },
    {
        type: "essay",
        question: "ما العلاقة بين \"الخبرات التعليمية\" و\"الأنشطة التعليمية\" في تصميم وحدة تعليمية رقمية؟",
        modelAnswer: "الخبرات التعليمية هي المواقف الكلية التي يمر بها المتعلم (مثل مشروع تصميم تطبيق تعليمي)، بينما الأنشطة هي المهام الجزئية التي ينفّذها (بحث، تصميم واجهة، اختبار تجريبي). في التصميم الرقمي، يجب أن تكون الأنشطة مترابطة ضمن خبرة تعليمية ذات معنى، لا مجرد تمارين منفصلة، لضمان التعلّم العميق والمستدام."
    },
    {
        type: "essay",
        question: "كيف تُفسّر أهمية \"مهارة التهيئة\" في بداية الدرس الرقمي؟",
        modelAnswer: "مهارة التهيئة (التمهيد) تُنشئ جسراً بين المعرفة السابقة والجديدة، وتفعّل الانتباه، وتبني الدافعية. في الدرس الرقمي، قد تأخذ شكل فيديو قصير، سؤال استفزازي، أو موقف حياتي. إهمالها يجعل المحتوى الرقمي \"ميتًا\"، لأن الدماغ لا يربطه بسياق ذهني، مما يقلل الاستيعاب، خاصة في البيئات غير المتزامنة."
    },
    {
        type: "essay",
        question: "ما دور \"الموارد التعليمية الرقمية\" في دعم التعلم الذاتي؟",
        modelAnswer: "الموارد الرقمية (كالمكتبات الإلكترونية، قواعد البيانات، المنصات المفتوحة) تُوفّر للمتعلم استقلالية في الوصول إلى المعرفة، وتنوّعًا في المصادر، وإمكانية التعلّم وفق الإيقاع الشخصي. لكن فعاليتها تعتمد على توجيه المعلم لاستخدامها بذكاء، لا مجرد توفير روابط، مما يحوّل الطالب من متلقٍّ إلى باحث نشط."
    },
    {
        type: "essay",
        question: "لماذا يُعدّ \"التفاعل\" عنصرًا جوهريًا في تعريف التدريس، حتى في البيئات غير المتزامنة؟",
        modelAnswer: "التدريس ليس شرحًا، بل بناء معنى مشترك. حتى في البيئات غير المتزامنة (مثل الدروس المسجلة)، يجب تصميم فرص للتفاعل: عبر أسئلة تأملية، منتديات نقاش، أو مهام تطبيقية. بدون تفاعل، يصبح الموقف تعليميًا (نقل معلومات)، لكنه لا يُحقّق تعلّمًا حقيقيًا، لأن التعلم عملية بنائية تتطلب مشاركة نشطة."
    },
    {
        type: "essay",
        question: "كيف يُسهم فهم \"تصنيفات مهارات التدريس\" (قبل، أثناء، بعد) في تحسين جودة الدروس الرقمية؟",
        modelAnswer: "الفهم يضمن شمولية التصميم:\n\nقبل التدريس: تحليل احتياجات المتعلمين، اختيار الأدوات المناسبة، تصميم الأهداف.\nأثناء التدريس: إدارة التفاعل الرقمي، استخدام الوسائل بفعالية، مراقبة الفهم.\nبعد التدريس: تحليل بيانات التعلم، جمع التغذية الراجعة، تعديل التصميم.\nهذا النهج المنظّم يمنع الارتجالية، ويحوّل الدرس الرقمي من \"عرض\" إلى \"تجربة تعلّم متكاملة\"."
    }
];

        let currentQuestionIndex = 0;
        let userAnswers = [];
        let score = 0;
        let mcqCount = questions.filter(q => q.type === 'mcq').length;

        function saveProgress() {
            localStorage.setItem('quiz-micro-d', JSON.stringify({
            currentQuestionIndex, userAnswers, score, mcqCount
            }));
        }

        function loadProgress() {
            const saved = localStorage.getItem('quiz-micro-d');
            if (saved) {
            const p = JSON.parse(saved);
            currentQuestionIndex = p.currentQuestionIndex;
            userAnswers = p.userAnswers || [];
            score = p.score || 0;
            mcqCount = p.mcqCount || 0;
            document.getElementById('quizContainer').style.display = 'block';
            loadQuestion();
            return true;
            }
            return false;
        }

        document.addEventListener('DOMContentLoaded', () => {
            const root = document.documentElement;
            if (localStorage.getItem('theme') === 'day') {
            root.classList.add('day-mode');
            document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun"></i>';
            }
            document.getElementById('themeToggle').addEventListener('click', () => {
            if (root.classList.contains('day-mode')) {
            root.classList.remove('day-mode');
            localStorage.setItem('theme', 'night');
            document.getElementById('themeToggle').innerHTML = '<i class="fas fa-moon"></i>';
            } else {
            root.classList.add('day-mode');
            localStorage.setItem('theme', 'day');
            document.getElementById('themeToggle').innerHTML = '<i class="fas fa-sun"></i>';
            }
            });

            if (!loadProgress()) {
            document.getElementById('quizContainer').style.display = 'block';
            loadQuestion();
            }
        });

        function loadQuestion() {
            saveProgress();
            const q = questions[currentQuestionIndex];
            document.getElementById('questionCounter').textContent = `السؤال ${currentQuestionIndex + 1} من ${questions.length}`;
            document.getElementById('questionText').textContent = q.question;

            const container = document.getElementById('optionsContainer');
            container.innerHTML = '';
            document.getElementById('nextBtn').classList.add('d-none');
            document.getElementById('submitEssayBtn').classList.add('d-none');

            if (q.type === 'mcq') {
            q.options.forEach((opt, idx) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn w-100 text-end';
            btn.textContent = opt;
            btn.onclick = () => selectMCQ(btn, idx);
            container.appendChild(btn);
            });
            if (userAnswers[currentQuestionIndex] !== undefined) {
            const btns = container.querySelectorAll('.option-btn');
            const ans = userAnswers[currentQuestionIndex];
            if (btns[ans]) {
            btns[ans].classList.add('selected');
            showMCQExplanation();
            document.getElementById('nextBtn').classList.remove('d-none');
            }
            }
            } else if (q.type === 'essay') {
            const ta = document.createElement('textarea');
            ta.className = 'essay-input';
            ta.placeholder = 'اكتب إجابتك هنا...';
            if (userAnswers[currentQuestionIndex]) {
            ta.value = userAnswers[currentQuestionIndex];
            }
            container.appendChild(ta);
            document.getElementById('submitEssayBtn').classList.remove('d-none');
            }
        }

        function selectMCQ(btn, idx) {
            document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected', 'correct', 'wrong'));
            btn.classList.add('selected');
            userAnswers[currentQuestionIndex] = idx;
            saveProgress();

            const q = questions[currentQuestionIndex];
            if (idx === q.correct) {
            btn.classList.add('correct');
            score++;
            } else {
            btn.classList.add('wrong');
            const correctBtn = container.querySelectorAll('.option-btn')[q.correct];
            if (correctBtn) correctBtn.classList.add('correct');
            }
            showMCQExplanation();
            document.getElementById('nextBtn').classList.remove('d-none');
        }

        function showMCQExplanation() {
            const q = questions[currentQuestionIndex];
            let exp = document.querySelector('.explanation-temp');
            if (!exp) {
            exp = document.createElement('div');
            exp.className = 'explanation explanation-temp';
            exp.innerHTML = `<h5>الشرح:</h5><p>${q.explanation}</p>`;
            document.getElementById('optionsContainer').appendChild(exp);
            }
        }

        function submitEssay() {
            const ta = document.querySelector('.essay-input');
            const ans = ta.value.trim();
            if (!ans) { alert('يرجى كتابة إجابة.'); return; }
            userAnswers[currentQuestionIndex] = ans;
            saveProgress();

            document.getElementById('submitEssayBtn').classList.add('d-none');

            const q = questions[currentQuestionIndex];
            const exp = document.createElement('div');
            exp.className = 'explanation';
            exp.innerHTML = `<h5>الإجابة النموذجية:</h5><p>${q.modelAnswer}</p>`;
            document.getElementById('optionsContainer').appendChild(exp);

            document.getElementById('nextBtn').classList.remove('d-none');
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < questions.length) {
            loadQuestion();
            } else {
            document.getElementById('quizContainer').style.display = 'none';
            document.getElementById('finalFormContainer').style.display = 'block';
            }
        }

        function saveStudentData() {
            const name = document.getElementById('studentName').value.trim();
            const id = document.getElementById('studentId').value.trim();
            if (!name || !id) { alert('أدخل الاسم وال ID.'); return; }

            const data = {
            studentName: name,
            studentId: id,
            subjectName: "مايكرو",
            section: "د",
            score: score,
            totalMCQ: mcqCount,
            percentage: mcqCount ? Math.round((score / mcqCount) * 100) : 0,
            timestamp: new Date().toISOString(),
            answers: userAnswers.map((a, i) => ({
            question: questions[i].question,
            type: questions[i].type,
            userAnswer: a,
            correctAnswer: questions[i].type === 'mcq' ? questions[i].options[questions[i].correct] : null,
            explanation: questions[i].type === 'mcq' ? questions[i].explanation : questions[i].modelAnswer
            }))
            };

            if (window.saveToFirebase) window.saveToFirebase(data);

            localStorage.removeItem('quiz-micro-d');
            showFinalResults(name, id, data.percentage);
        }

        function showFinalResults(name, id, pct) {
            document.getElementById('finalFormContainer').style.display = 'none';
            document.getElementById('resultContainer').style.display = 'block';

            document.getElementById('finalScore').textContent = `${score}/${mcqCount}`;
            let txt = "حاول مرة أخرى! 💪";
            if (pct >= 80) txt = "ممتاز! 🌟";
            else if (pct >= 60) txt = "جيد جدًا! 👍";
            else if (pct >= 40) txt = "لابأس! 📚";
            document.getElementById('resultText').textContent = txt;

            const expCont = document.getElementById('explanationsContainer');
            expCont.innerHTML = '<h3 class="text-light mb-4">جميع إجاباتك:</h3>';
            questions.forEach((q, i) => {
            const div = document.createElement('div');
            div.className = 'explanation';
            const userAns = userAnswers[i] || "لم تجب";
            if (q.type === 'mcq') {
            div.innerHTML = `
            <h5>السؤال ${i+1}: ${q.question}</h5>
            <p><strong>إجابتك:</strong> ${q.options[userAns] || 'لم تجب'}</p>
            <p><strong>الإجابة الصحيحة:</strong> ${q.options[q.correct]}</p>
            <p><strong>الشرح:</strong> ${q.explanation}</p>
            `;
            } else {
            div.innerHTML = `
            <h5>السؤال ${i+1} (مقالي): ${q.question}</h5>
            <p><strong>إجابتك:</strong> ${userAns}</p>
            <p><strong>الإجابة النموذجية:</strong> ${q.modelAnswer}</p>
            `;
            }
            expCont.appendChild(div);
            });
        }

        function shareToWhatsApp() {
            const cc = document.getElementById('countryCode').value.trim();
            const phone = document.getElementById('phoneNumber').value.trim();
            if (!cc || !phone) { alert('أدخل رمز الدولة ورقم الهاتف.'); return; }
            const full = cc + phone.replace(/^0+/, '');
            const msg = `لقد انتهيت من اختبار "التدريس المصغر - المجموعة د" وحصلت على ${score}/${mcqCount}!`;
            window.open(`https://wa.me/${full}?text=${encodeURIComponent(msg)}`, '_blank');
        }

        function downloadPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            // Note: jsPDF has limited Arabic support by default. This might need a custom font.
            doc.setFont('Amiri'); 
            doc.text('نتائج الاختبار', 105, 20, null, null, 'center');
            doc.text('التدريس المصغر - المجموعة د', 20, 40);
            doc.text(`النتيجة: ${score}/${mcqCount}`, 20, 50);
            let y = 70;
            questions.forEach((q, i) => {
            if (y > 250) { doc.addPage(); y = 20; }
            doc.text(`السؤال ${i+1}: ${q.question}`, 20, y, { maxWidth: 170 });
            y += 10;
            const ans = userAnswers[i] || 'لم تجب';
            if (q.type === 'mcq') {
            doc.text(`إجابتك: ${q.options[ans] || 'لم تجب'}`, 25, y, { maxWidth: 165 });
            y += 10;
            doc.text(`الصحيحة: ${q.options[q.correct]}`, 25, y, { maxWidth: 165 });
            } else {
            doc.text(`إجابتك: ${ans}`, 25, y, { maxWidth: 165 });
            }
            y += 15;
            });
            doc.save('نتيجة_التدريس المصغر_د.pdf');
        }

        function restartQuiz() {
            localStorage.removeItem('quiz-micro-d');
            currentQuestionIndex = 0; userAnswers = []; score = 0;
            document.getElementById('resultContainer').style.display = 'none';
            document.getElementById('quizContainer').style.display = 'block';
            loadQuestion();
        }

        function backToMaterials() {
            localStorage.removeItem('quiz-micro-d');
            window.location.href = 'materials.html';
        }

        function exitQuiz() {
            if (confirm('هل تريد إنهاء الاختبار؟')) {
            localStorage.removeItem('quiz-micro-d');
            window.location.href = 'materials.html';
            }
        }
        </script>
</body>
</html>